<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Registrierung - NGS System</title>
  
  <!-- CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
  <link href="{{ url_for('static', filename='css/auth.css') }}" rel="stylesheet">
  <link href="{{ url_for('static', filename='css/register.css') }}" rel="stylesheet">
  <link href="{{ url_for('static', filename='icon/dna.png') }}" rel="icon" type="image/png">
</head>

<body class="auth-page">
<div class="auth-container auth-container-large">
  
  <!-- Brand Section -->
  <div class="brand-section">
    <div class="brand-icon">
      <i class="fas fa-user-plus"></i>
    </div>
    <h1 class="brand-title">Registrierung</h1>
    <p class="brand-subtitle">Erstellen Sie Ihr NGS System Konto</p>
  </div>

  <!-- Flash Messages -->
  {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
      <div id="flashMessages">
        {% for category, message in messages %}
          <div class="flash {{ category }}" role="alert">
            <i class="fas fa-info-circle me-2"></i>{{ message }}
          </div>
        {% endfor %}
      </div>
    {% endif %}
  {% endwith %}

  <!-- Registration Form -->
  <form method="POST" id="registerForm" novalidate>
    {{ form.hidden_tag() }}
    
    <!-- Username Field -->
    <div class="form-floating mb-3">
      {{ form.username(
        class="form-control", 
        id="floatingUsername", 
        placeholder="Benutzername",
        required=true,
        autocomplete="username"
      ) }}
      {{ form.username.label(for="floatingUsername") }}
      <div class="invalid-feedback">
        Bitte geben Sie einen gültigen Benutzernamen ein (mindestens 4 Zeichen).
      </div>
      <div class="valid-feedback">
        Benutzername ist verfügbar.
      </div>
      <div class="field-validation" id="usernameValidation"></div>
    </div>
    
    <!-- Email Field -->
    <div class="form-floating mb-3">
      {{ form.email(
        class="form-control", 
        id="floatingEmail", 
        placeholder="E-Mail Adresse",
        type="email",
        required=true,
        autocomplete="email"
      ) }}
      {{ form.email.label(for="floatingEmail") }}
      <div class="invalid-feedback">
        Bitte geben Sie eine gültige E-Mail Adresse ein.
      </div>
      <div class="valid-feedback">
        E-Mail Adresse ist gültig.
      </div>
      <div class="field-validation" id="emailValidation"></div>
    </div>
    
    <!-- Password Field -->
    <div class="form-floating mb-3">
      {{ form.password(
        class="form-control", 
        id="floatingPassword", 
        placeholder="Passwort",
        required=true,
        autocomplete="new-password"
      ) }}
      {{ form.password.label(for="floatingPassword") }}
      <div class="invalid-feedback">
        Passwort erfüllt nicht alle Anforderungen.
      </div>
      
      <!-- Password Strength Indicator -->
      <div class="password-strength" id="passwordStrength" style="display: none;">
        <div class="strength-bar">
          <div class="strength-fill" id="strengthFill"></div>
        </div>
        <div class="strength-text" id="strengthText"></div>
        
        <!-- Password Requirements -->
        <div class="password-requirements">
          <div class="requirement unmet" id="req-length">
            <i class="fas fa-times"></i>
            <span>Mindestens 6 Zeichen</span>
          </div>
          <div class="requirement unmet" id="req-uppercase">
            <i class="fas fa-times"></i>
            <span>Ein Großbuchstabe</span>
          </div>
          <div class="requirement unmet" id="req-lowercase">
            <i class="fas fa-times"></i>
            <span>Ein Kleinbuchstabe</span>
          </div>
          <div class="requirement unmet" id="req-number">
            <i class="fas fa-times"></i>
            <span>Eine Zahl</span>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Password Confirmation Field -->
    <div class="form-floating mb-3">
      {{ form.password2(
        class="form-control", 
        id="floatingPassword2", 
        placeholder="Passwort wiederholen",
        required=true,
        autocomplete="new-password"
      ) }}
      {{ form.password2.label(for="floatingPassword2") }}
      <div class="invalid-feedback">
        Passwörter stimmen nicht überein.
      </div>
      <div class="valid-feedback">
        Passwörter stimmen überein.
      </div>
      <div class="field-validation" id="password2Validation"></div>
    </div>

    <div class="d-grid mb-3">
      {{ form.submit(class="btn btn-success", id="registerBtn") }}
    </div>
  </form>

  <!-- Divider -->
  <div class="divider">
    <span>oder</span>
  </div>

  <!-- Login Link -->
  <div class="login-link">
    <p class="mb-0">
      Bereits registriert? 
      <a href="{{ url_for('auth.login') }}">
        <i class="fas fa-sign-in-alt me-1"></i>Jetzt anmelden
      </a>
    </p>
  </div>

</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="{{ url_for('static', filename='js/register.js') }}"></script>
</body>
</html>